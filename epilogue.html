<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çœŸç›¸ - Epilogue</title>
    <style>
        :root {
            --bg-color: #000;
            --text-color: #e0e0e0;
            --accent-color: #8ab4f8;
            --danger-color: #d32f2f;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Sawarabi Mincho', 'Hiragino Mincho ProN', 'serif';
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 40px;
            overflow-y: auto;
        }

        #epilogue-container {
            max-width: 700px;
            width: 100%;
            line-height: 2;
            white-space: pre-wrap;
            animation: fadeIn 3s ease-in;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        h1 {
            color: var(--danger-color);
            text-align: center;
            letter-spacing: 0.3rem;
            font-size: 1.8rem;
            margin-top: 20px;
            margin-bottom: 40px;
        }

        /* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã®å…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
        .action-btn {
            background: #1a1a1a;
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            padding: 12px 30px;
            cursor: pointer;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.4s ease;
            margin: 20px auto;
            display: block;
        }

        .action-btn:hover {
            background: var(--accent-color);
            color: #000;
            box-shadow: 0 0 15px rgba(138, 180, 248, 0.4);
        }

        /* æš—è¨¼ç•ªå·å…¥åŠ›ã‚¨ãƒªã‚¢ */
        #pass-area {
            display: none;
            text-align: center;
            margin: 40px 0;
            padding: 30px;
            border: 1px solid #333;
            background: #0a0a0a;
            animation: fadeIn 1s;
        }

        #pass-input {
            background: #222;
            border: 1px solid #444;
            color: #fff;
            padding: 10px;
            font-size: 1.5rem;
            letter-spacing: 0.5rem;
            text-align: center;
            width: 180px;
            margin-bottom: 20px;
            outline: none;
        }

        /* æ‰‹ç´™ã®è¡¨ç¤ºã‚¨ãƒªã‚¢ */
        #letter-content {
            display: none;
            max-width: 650px;
            background-color: #111;
            border: 1px solid #222;
            padding: 40px;
            margin-top: 40px;
            line-height: 2.2;
            color: #ccc;
            box-shadow: 0 0 40px rgba(255,255,255,0.03);
            animation: slideUp 2s ease-out;
            white-space: pre-wrap;
            border-left: 3px solid var(--accent-color);
        }

        #trunk-button {
            display: none;
            margin: 50px auto;
        }

        .back-link {
            display: block;
            margin: 80px 0;
            color: #666;
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s;
        }

        .back-link:hover {
            color: var(--accent-color);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUp { 
            from { opacity: 0; transform: translateY(40px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
    </style>
</head>
<body>

    <div id="epilogue-container">
        <h1 id="result-title"></h1>
        <div id="result-text"></div>
        
        <button id="trunk-button" class="action-btn" onclick="showPassInput()">ğŸ§³ ãƒˆãƒ©ãƒ³ã‚¯ã‚’èª¿ã¹ã‚‹</button>

        <div id="pass-area">
            <p style="font-size: 0.9rem; color: #aaa; margin-bottom: 15px;">5æ¡ã®æš—è¨¼ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
            <input type="text" id="pass-input" maxlength="5" placeholder="*****" onkeydown="if(event.key==='Enter') checkPassword()"><br>
            <button class="action-btn" onclick="checkPassword()">è§£éŒ </button>
        </div>

        <div id="letter-content"></div>

        <a href="index.html" class="back-link">ã‚¿ã‚¤ãƒˆãƒ«ã¸æˆ»ã‚‹</a>
    </div>

    <script>
        window.onload = () => {
            // game.jsã‹ã‚‰æ¸¡ã•ã‚ŒãŸçµæœã‚’å–å¾—
            const result = JSON.parse(sessionStorage.getItem('game_result'));
            
            if (!result) {
                document.getElementById('result-text').innerText = "ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚TOPã‹ã‚‰ã‚„ã‚Šç›´ã—ã¦ãã ã•ã„ã€‚";
                return;
            }

            document.getElementById('result-title').innerText = result.title;
            document.getElementById('result-text').innerText = result.text;

            // æ­£è§£ï¼ˆè“®ä¸‰ï¼‰ã®å ´åˆã®ã¿ã€ä¸€å®šæ™‚é–“å¾Œã«ãƒˆãƒ©ãƒ³ã‚¯ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
            if (result.isCorrect) {
                setTimeout(() => {
                    document.getElementById('trunk-button').style.display = 'block';
                }, 3500); // èª­äº†æ™‚é–“ã‚’è€ƒæ…®ã—ã¦3.5ç§’å¾Œã«è¡¨ç¤º
            }
        };

        // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›æ¬„ã‚’è¡¨ç¤º
        function showPassInput() {
            document.getElementById('trunk-button').style.display = 'none';
            document.getElementById('pass-area').style.display = 'block';
            document.getElementById('pass-input').focus();
        }

        // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç…§åˆ
        function checkPassword() {
            const val = document.getElementById('pass-input').value;
            if (val === "13542") {
                revealLetter();
            } else {
                alert("æš—è¨¼ç•ªå·ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚");
            }
        }

        // æ‰‹ç´™ã‚’è¡¨ç¤º
        function revealLetter() {
            document.getElementById('pass-area').style.display = 'none';
            const letter = document.getElementById('letter-content');
            letter.style.display = 'block';
            
            letter.innerText = `é–‹ã‹ã‚ŒãŸä¸­ã«å…¥ã£ã¦ã„ãŸã®ã¯ã€æ‰‹ç´™ã¨ã€ã€Œæ˜æ—¥ã¸ã®ãƒ¬ã‚¯ã‚¤ã‚¨ãƒ ã€ã®æ¥½è­œâ€¦â€¦æ¯ã•ã‚“ã®ç§˜å¯†ãŒãã“ã«ã‚ã£ãŸã€‚
æ‰‹ç´™ã«ã¯ã€ã“ã†æ›¸ã‹ã‚Œã¦ã„ãŸã€‚

ã€Œç§ã«ã¯ç´—å­£(ã•ã)ã¨ã„ã†ãƒã‚¤ã‚ªãƒªãƒ‹ã‚¹ãƒˆã®è¦ªå‹ãŒã„ãŸã€‚ã‹ã¤ã¦ç´—å­£ã¨è¡Œäººã¯ä»˜ãåˆã£ã¦ã„ã¦ã€ç´—å­£ã®ãŠè…¹ã«ã¯å­ä¾›ãŒå®¿ã£ã¦ã„ãŸã€‚ã§ã‚‚ç´—å­£ã¯ã€äº¤é€šäº‹æ•…ã«ã‚ã£ã¦äº¡ããªã£ãŸã®ã€‚å¹¸ã„ãªã“ã¨ã«ãŠè…¹ã®å­ä¾›ã ã‘ã¯åŠ©ã‹ã£ãŸã€‚ã“ã®ã¾ã¾ã§ã¯æ¯è¦ªã®ã„ãªã„å­ã«ãªã£ã¦ã—ã¾ã†ã€‚ãã†æ€ã£ãŸç§ã¯è¡Œäººã¨çµå©šã—ã€äºŒäººã§å­ä¾›ã‚’è‚²ã¦ã¦ã„ãæ±ºå¿ƒã‚’ã—ãŸã€‚ãã®å­ä¾›ã®åãŒâ€¦â€¦ä¸€æµ·ã€‚
ã‚„ãŒã¦ç§ã¨è¡Œäººã®æ„›æƒ…ãŒæ·±ã¾ã‚Šã€ã‚ãªãŸãŸã¡å…„å¼Ÿå§‰å¦¹(ãã‚‡ã†ã ã„)ãŒç”£ã¾ã‚Œã¦è¡Œã£ãŸã®â€¦â€¦ã€‚

ã‚‚ã†ä¸€ã¤ã®ç§˜å¯†ã€‚ãƒˆãƒ©ãƒ³ã‚¯ã«ã‚ã‚‹ã€Œæ˜æ—¥ã¸ã®ãƒ¬ã‚¯ã‚¤ã‚¨ãƒ ã€ã®æ¥½è­œã«ã¯ã€ç§ãŒä½œæ›²è€…ã¨ã—ã¦åå‰ã‚’æ›¸ã„ã¦ã„ã‚‹ã€‚è¡Œäººã®æ­»å¾Œã«ç™ºè¡¨ã•ã‚ŒãŸæ›²ã¯ã€ã™ã¹ã¦ç§ãŒæ›¸ã„ã¦ã„ãŸã®ã€‚ã©ã®æ›²ã‚‚è¡Œäººã®ã“ã¨ã‚’æƒ³ã£ã¦æ›¸ã„ãŸæ›²â€¦â€¦ã€‚
ç§ã¯èƒ¸ã®ç—…æ°—ã®ã›ã„ã§ã€ã‚‚ã†é•·ãã¯ãªã„ã¨åŒ»è€…ã«è¨€ã‚ã‚ŒãŸã€‚
æ­»å¾Œã€æ›²ã®æ¨©åˆ©ã¯ã™ã¹ã¦æ”¾æ£„ã—ã¦ã€èª°ã§ã‚‚è‡ªç”±ã«ä½¿ãˆã‚‹æ›²ã«ã™ã‚‹ã‚ã€‚æ®‹ã£ãŸè²¡ç”£ã¯ã€ã‚ãªãŸãŸã¡ã§å‡ç­‰ã«åˆ†ã‘ã¦æ¬²ã—ã„ã€‚â€¦â€¦ç§ã¯ã‚‚ã†ã™ãã€è¡Œäººã®ã‚‚ã¨ã¸æ—…ç«‹ã¡ã¾ã™ã€‚

ã ã‹ã‚‰ã€Œæ˜æ—¥ã¸ã®ãƒ¬ã‚¯ã‚¤ã‚¨ãƒ ã€ã‚’ã€ç§ã‚’é€ã‚‹æ™‚ã«æµã—ã¦æ¬²ã—ã„ã®ã€‚è¡Œäººã¨ç§ãŒç”ŸããŸè¨¼ã¨ã—ã¦ã­ã€‚
ã‚ãªãŸãŸã¡ã¯ã“ã‚Œã‹ã‚‰ã€è‡ªåˆ†ã®äººç”Ÿã®éŸ³è‰²ã‚’å¥ã§ãªã•ã„ã€‚ãã“ã«æ±ºã‚ã‚‰ã‚ŒãŸæ¥½è­œã¯ç„¡ã„ã®ã ã‹ã‚‰â€¦â€¦ã€

ã„ã¤ã®é–“ã«ã‹ç©ºã¯æ¾„ã‚“ã§ã€æ™´ã‚Œæ¸¡ã£ã¦ã„ãŸã€‚
é ãã‹ã‚‰ãƒ‘ãƒˆã‚«ãƒ¼ã®ã‚µã‚¤ãƒ¬ãƒ³ã®éŸ³ãŒèã“ãˆã¦ãã‚‹â€•â€•ã€‚ã€Šçµ‚ã€‹`;
            
            // è¡¨ç¤ºå¾Œã«æ‰‹ç´™ã®ä½ç½®ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            letter.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
